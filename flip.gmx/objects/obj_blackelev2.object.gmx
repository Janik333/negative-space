<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_blackelev</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>obj_blackwall</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>elevate = false;
addheight = 0;
ismoving = false;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>ismoving = false;
if (elevate){
    //if pushpullblock is half on
    if (!(collision_point(x,y-1,obj_blackpushpull,false,false) ^ collision_point(x+63,y-1,obj_blackpushpull,false,false)))
    //if player isnt stuck in left or right side of elev
    if(!((collision_point(x-1,y+32,obj_whitedude,false,false) || collision_point(x+63,y+32,obj_whitedude,false,false)) &amp;&amp; 
         (collision_point(x,y+32,obj_whitedude,false,false)   || collision_point(x+64,y+32,obj_whitedude,false,false)) &amp;&amp; 
          collision_point(x-1,y+4,obj_whitewall,false,false)))
          
        if (y &gt; ystart - 128-(64*addheight))
        {
            amount = 4;
            
            //move black block up with elevator
            if (collision_point(x,y-1,obj_blackpushpull,false,false) &amp;&amp; collision_point(x+63,y-1,obj_blackpushpull,false,false))
            {
                if (collision_point(x,y-65,obj_blackwall,false,false)){
                    amount = 0;
                }
                else
                {
                    var inst = instance_position(x, y-1, obj_blackpushpull);
                    inst.y -= amount;
                }

                /*
                if(place_meeting(x,y-128,obj_blackpushpull))
                {
                    var inst2 = instance_position(x, y-65, obj_blackpushpull);
                    inst2 .y -= 4;
                }
                
                if(place_meeting(x+63,y-128,obj_blackpushpull))
                {
                    var inst2 = instance_position(x+63, y-65, obj_blackpushpull);
                    inst2 .y -= 4;
                }
                */
            }
            if(amount !=0)
                ismoving = true;
            y-=amount;
            //move black player up with elevator
            if (place_meeting(x,y-1,obj_blackdude))
                obj_blackdude.y -= amount;
                
            //move white player up with elevator
            if (place_meeting(x,y-1,obj_whitedude))
                if( obj_whitedude.y &gt; ystart - 132-(64*addheight))
                    obj_whitedude.y -= amount;
        }
    }
    else if (y &lt; ystart)
    if (!place_meeting(x,y+1,obj_blackwall))
    {
        var amount = 4;

        //move white player down with elevator
        if (place_meeting(x,y,obj_whitedude))
        {
            if((collision_point(x+63,y-1,obj_whitewall,false,false) &amp;&amp; collision_point(x+64,y+63,obj_whiteblock,false,false) &amp;&amp; collision_point(x+63,y+1,obj_whitedude,false,false) &amp;&amp; collision_point(x+64,y+1,obj_whitedude,false,false)))
                amount = 0;
            if((collision_point(x,y-1,obj_whitewall,false,false) &amp;&amp; collision_point(x-1,y+63,obj_whiteblock,false,false)   &amp;&amp; collision_point(x,y+1,obj_whitedude,false,false) &amp;&amp; collision_point(x-1,y+1,obj_whitedude,false,false)))
                amount = 0;

            with(obj_whitedude)
                if (!place_meeting(x,y+1,obj_whiteblock))
                    y += amount;
            
            //moves more if they are stuck in roof
            if (collision_point(x+32,y+2,obj_whitedude,false,false) || collision_point(x+31,y+2,obj_whitedude,false,false))
                obj_whitedude.y += 4; 
        }
        //move black player down with elevator
        if (place_meeting(x,y-5,obj_blackdude))
            obj_blackdude.vsp += amount;
        //so black player doesnt get stuck
        if (collision_point(x+31,y+64,obj_blackdude,false,false) || collision_point(x+32,y+64,obj_blackdude,false,false))
            obj_blackdude.y += amount;
            
        if(amount !=0)
            ismoving = true;
        y += amount;
    }

//creates white wall 
if (yprevious != y)
{
    //above elevator
    //if (position_meeting(x, y-1, all))
    //    instance_create (x,y-4,obj_whitepixelvert);
    for (var i = 0; i &lt; 64 ; i+=4)
    {
        j = y-i;
        if ( j &gt; ystart - 132-(64*addheight) &amp;&amp; !collision_point(x,j,obj_blackwall,false,false) )//&amp;&amp; !collision_point(x,j,obj_whitewall,false,false))
            instance_create (x,j,obj_whitepixelvert);
    }
    //below elevator
    for (var l = 64; l &lt; 128 ; l+=4)
    {
        k = y+l;
        if ( k &lt; ystart + 64 &amp;&amp; !collision_point(x,k,obj_blackwall,false,false) )//&amp;&amp; !collision_point(x,k,obj_whitewall,false,false))
            instance_create (x,k,obj_whitepixelvert);
    }
}

//destroy white walls in elevator (so white player can go through)
var j;
for (j = 0; j &lt; 64; j+=4)
{
    with(instance_position(x,y+j,obj_whitewall))
        instance_destroy();
    with(instance_position(x+63,y+j,obj_whitewall))
        instance_destroy();
}
var k;
for (k = 0; k &lt; 64; k+=4)
{
    with(instance_position(x+k,y,obj_whitewall))
        instance_destroy();
    with(instance_position(x+k,y+63,obj_whitewall))
        instance_destroy();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_sprite(spr_blackelev,0,x,y);
if(ismoving)
{
    draw_set_color(c_white);
    draw_line(x,y,x,y+63);
    draw_line(x+63,y,x+63,y+63);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>32,32</point>
    <point>32,32</point>
  </PhysicsShapePoints>
</object>
